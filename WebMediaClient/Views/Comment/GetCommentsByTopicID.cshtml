@model List<WebMediaClient.Models.CommentViewModel>

<script type="text/javascript">
	window.addEventListener("load", function () { setIDs(); }, false);

	function addReply()
	{
		var link = '@Html.Raw(Url.Action("CreateComment", "Comment", new { topicID = @ViewBag.TopicID, authorID = @ViewBag.User.ID }))';
		$.ajax
		({
			url: link,
			data:
				{
					text: text,
					datecreated: Date.now(),
				},
			dataType: 'json',
			type: 'POST',
			success: function (data) {
			}
		})
	}

	function setIDs() {
		var textAreas = document.getElementsByTagName("textarea");
		for (i = 0; i < textAreas.length; i++)
		{
			var textArea = textAreas[i];
			if (textArea.id != "comment_text")
			{
				textArea.setAttribute("id", "textarea" + "_" + i.toString());
				CKEDITOR.replace("textarea" + "_" + i.toString(), { customConfig: "/Scripts/Myconfig.js", readOnly: true });
			}
		}
	}
</script>

<script src="~/ckeditor/ckeditor.js"></script>

<div class="row">
	<div class="col-md-8">
		<div class="list-group">
			@foreach (var item in Model)
			{
				<div class="row">
					<div class="col-md-4">
						@Html.Action("GetUserByID", "User", new { ID = item.AuthorID });
					</div>
					<div class="col-md-4">
						@if(item.Name != null)
						{
							@Html.TextBoxFor(i => item.Name, new { @class = "form-control" })
						}
					</div>
					<div class="col-md-4">
						@Html.TextAreaFor(i => item.Text, new { @class = "form-control", @rows = 5, @cols = 25 })
					</div>
				</div>
				<div class="row">
					<div class="col-md-4">
						<button class="button" onclick="addReply()" />
					</div>
				</div>
			}
		</div>
	</div>
</div>


